<p id="notice"><%= notice %></p>

<%@current_member ||= Member.find_by_token(cookies[:token]) if cookies[:token]%>


<button> <%# Creates a button%>
<b>
  <%= link_to 'Events', events_path %> <%# Create a new member button %>
</b>
</button>

<% if @current_member && @current_member.access_type == 1 %> 
  <button> <%# Creates a button%>
  <b>
    <%= link_to 'Finances', finances_path %> <%# Create a new member button %>
  </b>
  </button>
<%end%>

<% if @current_member && @current_member.access_type == 1 %> 
  <button> <%# Creates a button%>
  <b>
    <%= link_to 'Attendances', attendances_path %> <%# Create a new member button %>
  </b>
  </button>
<%end%>



<h1>Members</h1>

<table>
  <thead>
    <tr>
      <%# Table column titles %>
      <th>Name</th>
      <th>Email</th>
      <th>Token</th>
      <th>Access type</th>
      <th>Paid status</th>
      <th>Points</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <%# for each of the members how their name, email, token, access type, paid status, and points and give the option to show edit or destroy %>
    <% @members.each do |member| %>
      <tr>
        <td><%= member.name %></td>
        <td><%= member.email %></td>
        <td><%= member.token %></td>
        <td><%= member.access_type %></td>
        <td><%= member.paid_status %></td>
        <td><%= member.points %></td>
        
        <td><%= link_to 'Show', member %></td>
        <td><%= link_to 'Edit', edit_member_path(member) %></td>
        <td><%= link_to 'Destroy', member, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'Create a New Member', new_member_path %> <%# Create a new member button %>
<br>
<br>
<%= link_to 'Back to Home', root_path %>



